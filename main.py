import time
import json
import telebot
from telebot import types

# ржмржЯ ржЯрзЛржХрзЗржи (ржЖржкржирж╛рж░ ржмржЯрзЗрж░ ржЯрзЛржХрзЗржи ржжрж┐рзЯрзЗ ржкрзНрж░рждрж┐рж╕рзНржерж╛ржкржи ржХрж░рзБржи)
BOT_TOKEN = "8223378978:AAGYcylIUyqeST6_GLB9PE643CSNJmpf7hw"

# ржмржЯ ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ рждрзИрж░рж┐ ржХрж░рж╛
bot = telebot.TeleBot(BOT_TOKEN)

# ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАржжрзЗрж░ ржбрзЗржЯрж╛ рж╕ржВрж░ржХрзНрж╖ржгрзЗрж░ ржЬржирзНржп (ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗрж░ ржЬржирзНржп ржбрзЗржЯрж╛ржмрзЗрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржнрж╛рж▓рзЛ)
user_data = {}

# /start ржХржорж╛ржирзНржб рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░
@bot.message_handler(commands=['start'])
def send_welcome(message):
    user_id = message.from_user.id
    user_data[user_id] = {'step': 0}
    
    welcome_text = """
    ЁЯОЙ рж╕рзНржмрж╛ржЧрждржо! ржЖржорж┐ ржПржХржЯрж┐ ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржо ржмржЯред
    
    ржЖржкржирж┐ ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржбржЧрзБрж▓рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи:
    /start - ржмржЯ рж╢рзБрж░рзБ ржХрж░рзБржи
    /help - рж╕рж╛рж╣рж╛ржпрзНржп ржкрж╛ржи
    /about - ржмржЯ рж╕ржорзНржкрж░рзНржХрзЗ ржЬрж╛ржирзБржи
    """
    
    bot.reply_to(message, welcome_text)

# /help ржХржорж╛ржирзНржб рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░
@bot.message_handler(commands=['help'])
def send_help(message):
    help_text = """
    ЁЯдЦ рж╕рж╛рж╣рж╛ржпрзНржп:
    
    ржПржЗ ржмржЯржЯрж┐ ржПржХржЯрж┐ ржЙржжрж╛рж╣рж░ржгред ржЖржкржирж┐ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрж╛ржЬржЧрзБрж▓рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи:
    
    1. ржЯрзЗржХрзНрж╕ржЯ ржорзЗрж╕рзЗржЬ ржкрж╛ржарж╛ржи - ржмржЯржЯрж┐ ржЙрждрзНрждрж░ ржжрзЗржмрзЗ
    2. /start ржХржорж╛ржирзНржб ржжрж┐ржпрж╝рзЗ рж╢рзБрж░рзБ ржХрж░рзБржи
    3. /about ржХржорж╛ржирзНржб ржжрж┐ржпрж╝рзЗ рждржерзНржп ржкрж╛ржи
    
    ржЖржкржирж┐ ржХрзЛржи ржмрж┐рж╖ржпрж╝рзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржЪрж╛ржи?
    """
    
    bot.reply_to(message, help_text)

# /about ржХржорж╛ржирзНржб рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░
@bot.message_handler(commands=['about'])
def send_about(message):
    about_text = """
    тД╣я╕П ржмржЯ рж╕ржорзНржкрж░рзНржХрзЗ:
    
    ржПржЗ ржмржЯржЯрж┐ Python programming language 
    ржПржмржВ pyTelegramBotAPI рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред
    
    ржбрзЗржнрзЗрж▓ржкрж╛рж░: ржЖржкржирж╛рж░ ржирж╛ржо
    рж╕ржВрж╕рзНржХрж░ржг: 1.0.0
    """
    
    bot.reply_to(message, about_text)

# ржЯрзЗржХрзНрж╕ржЯ ржорзЗрж╕рзЗржЬ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░
@bot.message_handler(func=lambda message: True)
def echo_all(message):
    user_id = message.from_user.id
    user_message = message.text
    
    # ржпржжрж┐ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржбрзЗржЯрж╛ ржирж╛ ржерж╛ржХрзЗ рждржмрзЗ рждрж╛ ржпрзЛржЧ ржХрж░рзБржи
    if user_id not in user_data:
        user_data[user_id] = {'step': 0}
    
    # рж╕рж╛ржзрж╛рж░ржг ржЙрждрзНрждрж░
    response = f"ржЖржкржирж┐ рж▓рж┐ржЦрзЗржЫрзЗржи: {user_message}\n\nржЖржорж┐ ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг ржмржЯ, ржЖрж░ржУ ржЙржирзНржиржд ржХрж░рж╛рж░ ржкрзНрж░ржпрж╝рзЛржЬржи ржЖржЫрзЗ!"
    
    bot.reply_to(message, response)

# ржмржЯ ржЪрж╛рж▓рж╛ржирзЛ
if __name__ == "__main__":
    print("ржмржЯ ржЪрж╛рж▓рзБ рж╣ржЪрзНржЫрзЗ...")
    while True:
        try:
            bot.polling(none_stop=True)
        except Exception as e:
            print(f"рждрзНрж░рзБржЯрж┐ ы░ЬьГЭ: {e}")
            time.sleep(15)
